# 사이드바 개편 및 공간 검색 시스템 설계 - 20

## 작업 개요

사이드바 메뉴를 논리적으로 재구성하고, 전체 시간표 뷰와 빈 강의실 찾기 기능을 추가하여 캠퍼스 공간 활용도를 극대화했습니다.

---

## 1. 사이드바 메뉴 구조 개편

### 설계 의도

**문제점:**
- 기존 메뉴 구조가 평면적이어서 탐색이 비효율적
- 관련 기능들이 흩어져 있어 사용자 혼란 유발

**해결책:**
- 4개의 명확한 카테고리로 그룹화
- 사용 빈도와 목적에 따른 계층 구조

### 새로운 메뉴 구조

```
┌─ [Main] 메인
│  ├─ 홈 (대시보드)
│  └─ AI 챗봇
│
├─ [학사관리] Academic
│  ├─ 전체 시간표 ⭐ NEW
│  ├─ E-클래스 (과제/성적)
│  ├─ 공지사항
│  └─ 성적조회
│
├─ [캠퍼스 라이프] Campus Life
│  ├─ 빈 강의실 찾기 ⭐ NEW
│  ├─ 학생식당
│  └─ 강의평가
│
└─ [고객지원] Support
   ├─ 마이페이지
   └─ 도움말
```

### 디자인 시스템

**활성화 색상:**
```css
/* 신구대 연두색 - 메뉴 활성화 시 */
background-color: #a2c54e;
```

**사용자 프로필 섹션 (하단):**
- 이름: 김학생
- 학번: 20241234
- 학과: 스마트IT과
- 학년: 2학년

---

## 2. 전체 시간표 (FullSchedule) 구현 전략

### UX 목표

> **"한 주의 수업 일정을 한눈에 파악할 수 있어야 한다"**

### 그리드 레이아웃

```
시간 | 월    | 화    | 수    | 목    | 금
─────┼───────┼───────┼───────┼───────┼──────
09:00│웹프로│       │       │자료구│
10:00│      │DB설계│       │자료구│
11:00│      │DB설계│알고리│       │
12:00│      │      │알고리│       │
13:00│      │      │알고리│       │운영체
...
```

### 핵심 기능

#### 1. 시간 기반 그리드
- **시간 슬롯**: 9:00 ~ 18:00 (1시간 단위)
- **요일**: 월~금 (5일)
- **셀 크기**: 최소 80px 높이로 가독성 확보

#### 2. 색상 코딩 시스템
```typescript
const classColors = {
  웹프로그래밍: 'bg-blue-500',
  데이터베이스: 'bg-purple-500',
  알고리즘: 'bg-green-500',
  자료구조: 'bg-orange-500',
  운영체제: 'bg-pink-500'
};
```

**의도:**
- 과목별 시각적 구분
- 빠른 일정 파악
- 색각 이상자를 위한 텍스트 레이블 병행

#### 3. 반응형 디자인

**데스크톱 (≥1024px):**
```css
.schedule-grid {
  display: grid;
  grid-template-columns: 80px repeat(5, 1fr);
  gap: 0.5rem;
}
```

**모바일 (\<1024px):**
```css
.schedule-container {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.schedule-grid {
  min-width: 800px; /* 가로 스크롤 유도 */
}
```

**사용자 안내:**
- 💡 팁 박스: "모바일에서는 화면을 가로로 스크롤하여 전체 요일을 확인할 수 있습니다."

### 정보 표시 우선순위

각 수업 카드에 표시되는 정보:

1. **과목명** (H4, bold) - 가장 크고 명확하게
2. **교수명** (User 아이콘 + 텍스트)
3. **강의실** (MapPin 아이콘 + 건물명 + 호수)
4. **시간** (Clock 아이콘 + 시작-종료)

### 데이터 구조

```typescript
interface ClassSchedule {
  id: string;
  name: string;          // 과목명
  professor: string;     // 교수명
  room: string;          // 강의실 호수
  building: string;      // 건물명
  dayOfWeek: number;     // 0-6 (일-토)
  startTime: string;     // "09:00"
  endTime: string;       // "10:30"
  color?: string;        // Tailwind 클래스
}
```

---

## 3. 빈 강의실 검색 (RoomFinder) 인터페이스 구조

### 설계 철학

> **"학생들이 지금 당장 사용할 수 있는 공간을 즉시 찾을 수 있어야 한다"**

### 필터 시스템

#### 1. 건물별 필터
```typescript
const buildings = [
  { id: 'all', name: '전체' },
  { id: 'it', name: 'IT관' },
  { id: 'main', name: '본관' },
  { id: 'general', name: '종합관' }
];
```

**UI:**
- 버튼 형태의 필터
- 활성화 시 연두색 (#a2c54e)
- 비활성화 시 회색

#### 2. 시간대 선택
```typescript
type TimeSlot = 'now' | 'after1h' | 'after2h';
```

- **지금 바로**: 현재 시간 기준
- **1시간 뒤**: 다음 교시 준비
- **2시간 뒤**: 오후 일정 계획

### 강의실 카드 레이아웃

```
┌────────────────────────────────────────┐
│ IT관 301호                      [팀플 가능]│
│ 50인 수용 가능  ✓ (사용 가능)         │
├────────────────────────────────────────┤
│ 🕒 다음 수업: 14:00 (1시간 30분 남음)   │
│    웹프로그래밍                         │
├────────────────────────────────────────┤
│ [프로젝터] [큰 테이블] [화이트보드]    │
└────────────────────────────────────────┘
```

### 정보 계층 구조

1. **강의실 번호** (가장 중요) - 크고 굵게
2. **특수 태그** ("팀플 가능" 등) - 눈에 띄는 배지
3. **수용 인원** - 팀 규모 결정에 필요
4. **다음 수업 정보** - 사용 가능 시간 파악
5. **특징 태그** - 세부 요구사항 확인

### "팀플 가능" 태그 로직

```typescript
/**
 * 큰 테이블이 있으면 팀플 특화 강의실로 표시
 */
const isTeamFriendly = (features: string[]): boolean => {
  return features.includes('큰 테이블');
};
```

**표시:**
```jsx
{isTeamFriendly(room.features) && (
  <span className="bg-primary-500 text-white px-3 py-1 rounded-full">
    팀플 가능
  </span>
)}
```

### 다음 수업 정보 (Next Class)

**목적:**
- 사용자가 강의실을 언제까지 사용할 수 있는지 명확히 알려줌
- 시간 계획에 도움

**구현:**
```typescript
interface NextClass {
  time: string;        // "14:00"
  className: string;   // "웹프로그래밍"
}

// 남은 시간 계산
const getTimeUntilNext = (nextTime: string): string => {
  const diff = calculateDifference(now, nextTime);
  return diff < 60 
    ? `${diff}분 남음`
    : `${Math.floor(diff / 60)}시간 ${diff % 60}분 남음`;
};
```

**UI:**
```jsx
<div className="bg-orange-50 border-2 border-orange-200 rounded-2xl p-4">
  <Clock /> 다음 수업: 14:00 (1시간 30분 남음)
  웹프로그래밍
</div>
```

### 특징 태그 시스템

**태그 유형:**
- 프로젝터: 발표 준비
- 큰 테이블: 팀 프로젝트
- 화이트보드: 브레인스토밍
- 스크린: 영상 시청

**확장 가능성:**
- 향후 "조용한 공간", "창가 자리", "콘센트 많음" 등 추가 가능

---

## 4. 클린 코드 아키텍처

### 파일 구조

```
src/
├── types/
│   └── campus.ts          # 타입 정의
├── utils/
│   └── campusHelpers.ts   # 순수 함수
├── pages/
│   ├── FullSchedule.tsx   # 시간표 페이지
│   └── RoomFinder.tsx     # 강의실 찾기 페이지
└── constants/
    └── menuData.ts        # 메뉴 데이터
```

### 타입 정의 (campus.ts)

**목적:**
- TypeScript의 타입 안전성 활용
- 인터페이스 문서화 역할
- IDE 자동완성 지원

**핵심 타입:**
```typescript
interface ClassSchedule { ... }  // 수업 정보
interface Room { ... }           // 강의실 정보
interface Building { ... }       // 건물 정보
interface RoomFilter { ... }     // 필터 옵션
```

### 유틸 함수 (campusHelpers.ts)

**설계 원칙:**
- 순수 함수 (Side Effect 없음)
- 단일 책임 원칙
- 테스트 가능성

**핵심 함수:**

```typescript
// 1. 강의실 가용성 확인
isRoomAvailable(room, currentTime, schedule): boolean

// 2. 다음 수업 찾기
findNextClass(roomNumber, building, schedule): ClassSchedule | null

// 3. 시간표 그룹화
groupScheduleByDay(schedule): Record<number, ClassSchedule[]>

// 4. 시간 변환
timeToMinutes(timeStr): number
getTimeDifference(start, end): number

// 5. 시간 슬롯 생성
generateTimeSlots(): TimeSlot[]
```

---

## 5. 사용자 경험 (UX) 개선사항

### Before vs After

#### 전체 시간표
- ❌ **Before**: 홈 화면의 "오늘의 수업"에서 하루치만 확인 가능
- ✅ **After**: 월~금 전체 일정을 한페이지에서 확인

#### 빈 강의실 찾기
- ❌ **Before**: 직접 건물을 돌아다니며 확인
- ✅ **After**: 앱에서 즉시 검색, 다음 수업 시간까지 파악

### 접근성 (Accessibility)

1. **색각 이상자 배려**
   - 색상만으로 정보 전달하지 않음
   - 아이콘과 텍스트 병행

2. **모바일 최적화**
   - 터치 친화적인 버튼 크기
   - 가로 스크롤 시 자연스러운 동작

3. **다크모드 지원**
   - 모든 UI 요소에 dark: 변형 적용

---

## 6. 향후 개선 방향

### 단기 (1개월)
- [ ] 실시간 강의실 점유 상태 연동 (IoT센서 or 수업 DB)
- [ ] 즐겨찾기 기능 (자주 쓰는 강의실)
- [ ] 경로 안내 (현재 위치 → 강의실)

### 중기 (3개월)
- [ ] AR 기반 실내 네비게이션
- [ ] 강의실 예약 시스템
- [ ] 사용자 리뷰 (조용함, 추움 등)

### 장기 (6개월)
- [ ] AI 기반 추천 시스템 (사용 패턴 학습)
- [ ] 캠퍼스 히트맵 (붐비는 시간대 시각화)

---

## 7. 기술 스택 및 의존성

**사용 라이브러리:**
- `framer-motion`: 애니메이션
- `lucide-react`: 아이콘
- `react-router-dom`: 라우팅

**CSS 전략:**
- Tailwind CSS 유틸리티 클래스
- 커스텀 색상: #a2c54e (신구대 연두색)

**상태 관리:**
- 현재: React `useState` (간단한 로컬 상태)
- 향후: 서버 데이터 연동 시 `React Query` 도입 검토

---

## 요약

### 구현 완료
1. ✅ 사이드바 메뉴 4개 카테고리로 재구성
2. ✅ 전체 시간표 (월~금 그리드)
3. ✅ 빈 강의실 찾기 (필터 + 태그)
4. ✅ 타입 및 유틸 함수 분리
5. ✅ 한글 주석으로 코드 문서화

### 핵심 가치
**"정보를 찾지 말고, 정보가 사용자를 찾아오게 하라"**

---

**작성**: 2026-01-26  
**최종 업데이트**: 사이드바 개편 및 공간 검색 시스템 완성  
**다음 작업**: AR 네비게이션 및 실시간 연동 - 21
