# 반응형 QR 레이아웃 및 심플 위젯 디자인 복구 - 06

## 작업 개요

사용자 요청에 따라 **웹(데스크톱)은 위젯 방식, 앱(모바일)은 상단 배치**로 레이아웃을 이원화하고, QR 디자인을 복잡한 학생증 카드 스타일에서 **심플한 위젯 스타일**로 롤백했습니다.

---

## 핵심 전략

### ✅ 이원화 전략
```
웹 (Desktop, ≥lg):
┌────────────┬─────┐
│ 오늘의 수업 │ QR  │
│            │위젯 │
│ 공지사항    │     │
└────────────┴─────┘

앱 (Mobile, <lg):
┌──────────────┐
│  QR 위젯     │
├──────────────┤
│ 오늘의 수업  │
├──────────────┤
│ 공지사항     │
└──────────────┘
```

### ✅ Simple is Best
- 복잡한 학생증 디자인 ❌
- 심플한 QR 위젯 디자인 ✅

---

## 1. SimpleQRWidget 컴포넌트

### 디자인 철학
**이전 (복잡한 학생증):**
- 그라데이션 배경
- 여러 정보 그리드
- 큰 QR 코드 (160px)
- 유효기간 바

**현재 (심플한 위젯):**
- 흰색 배경
- #a2c54e 보더 (2px)
- 이름/학번 상단 (작게)
- QR 코드 중앙 (180px)
- 타이머 하단 (강조)

### 구현
```typescript
<div className="bg-white rounded-3xl shadow-sm p-6 border-2 border-primary-500">
  {/* 상단: 이름, 학번 - 작고 심플하게 */}
  <div className="text-center mb-4">
    <p className="text-sm font-semibold">{name}</p>
    <p className="text-xs text-gray-500">#{studentId}</p>
  </div>

  {/* QR 코드 - 중앙 */}
  <div className="flex justify-center mb-4">
    <div className="bg-white p-3 rounded-2xl shadow-sm">
      <QRCodeSVG size={180} />
    </div>
  </div>

  {/* 타이틀 */}
  <h3>도서관 출입 QR</h3>
  <p>출입 시 스캔해주세요</p>

  {/* 갱신 타이머 - 하단 강조 */}
  <div className="bg-primary-50 rounded-full border border-primary-200">
    <RefreshCw />
    <span>갱신까지 00:54</span>
  </div>
</div>
```

### 디자인 요소
**배경:**
- `bg-white` (흰색)
- `dark:bg-gray-800` (다크 모드)

**보더:**
- `border-2 border-primary-500` (#a2c54e, 2px)

**이름/학번:**
- Text: `text-sm` (14px)
- Color: `text-gray-900`
- 위치: 상단 중앙

**QR 코드:**
- Size: 180×180px
- Padding: 3 (12px)
- Background: 흰색
- Shadow: `shadow-sm`

**타이머:**
- Background: `bg-primary-50` (연두색 5%)
- Border: `border-primary-200`
- Pill shape: `rounded-full`
- Icon: RefreshCw

---

## 2. 반응형 레이아웃

### 모바일 (<lg, <1024px)
```typescript
{/* QR 최상단 배치 */}
<div className="lg:hidden">
  <SimpleQRWidget />
</div>

{/* 메인 콘텐츠 */}
<div className="lg:col-span-2">
  {/* 오늘의 수업 */}
  {/* 공지사항 */}
</div>
```

**특징:**
- QR이 가장 먼저 보임
- 세로 스택 레이아웃
- 전체 너비 활용

### 데스크톱 (≥lg, ≥1024px)
```typescript
<div className="grid grid-cols-3 gap-8">
  {/* 좌측 2칸 */}
  <div className="lg:col-span-2">
    {/* 오늘의 수업 */}
    {/* 공지사항 */}
  </div>

  {/* 우측 1칸 - QR Widget */}
  <div className="hidden lg:block">
    <div className="sticky top-24">
      <SimpleQRWidget />
    </div>
  </div>
</div>
```

**특징:**
- 3단 그리드 (2:1 비율)
- QR 우측 사이드바
- Sticky 포지셔닝 (top-24)

### Sticky 동작
```typescript
<div className="sticky top-24">
```

**효과:**
- 스크롤 시 QR 위젯 고정
- `top-24` (96px): 헤더 높이(64px) + 여백(32px)
- 항상 화면에 표시

---

## 3. 여백 증가 (가독성 향상)

### Before vs After

**Before:**
```typescript
<div className="space-y-6">  // 24px gap
  <div className="p-6">      // 24px padding
```

**After:**
```typescript
<div className="space-y-8">  // 32px gap
  <div className="p-8">      // 32px padding
```

### 적용 영역
```typescript
// Home.tsx 전체 섹션
<div className="space-y-8">

// 오늘의 수업 카드
<div className="p-8">

// 타임라인 아이템
<div className="space-y-8">

// 공지사항 카드
<div className="p-8">

// 공지사항 리스트
<div className="space-y-4">
  <div className="p-5">  // 개별 공지 padding
```

---

## 4. 전체보기 버튼 강조

### Before
```typescript
<button className="text-sm text-primary-600 font-semibold">
  전체보기 <ChevronRight />
</button>
```

**문제:**
- 텍스트만 (배경 없음)
- 눈에 띄지 않음

### After
```typescript
<button className="flex items-center gap-1 px-4 py-2 
  bg-primary-500 text-white rounded-2xl hover-lift 
  font-semibold transition">
  전체보기
  <ChevronRight className="w-4 h-4" />
</button>
```

**특징:**
- 연두색 배경 (`bg-primary-500`)
- 흰색 텍스트 (`text-white`)
- Rounded 버튼 (`rounded-2xl`)
- Hover lift 효과
- 아이콘 포함

---

## 5. 파일 구조

### 신규 파일
```
src/
  components/
    SimpleQRWidget.tsx  ← 신규
```

### 수정 파일
```
src/
  pages/
    Home.tsx            ← 대폭 수정
```

### 삭제/대체 파일
```
src/
  components/
    DigitalIDCard.tsx   ← 더 이상 사용 안 함
```

---

## 시각적 검증

### 데스크톱 뷰

![데스크톱 레이아웃](../desktop_layout_final_1767962963597.png)

**확인사항:**
✅ QR 위젯 우측 사이드바  
✅ 흰색 배경 + 연두색 보더  
✅ 이름/학번 상단 (작게)  
✅ QR 코드 중앙  
✅ 타이머 하단 강조  
✅ 오늘의 수업 좌측 (2칸)  
✅ 공지사항 좌측 하단  
✅ '전체보기' 버튼 강조  

### 모바일 뷰

![모바일 레이아웃](../mobile_layout_view_1767961653199.png)

**확인사항:**
✅ QR 위젯 최상단  
✅ 심플한 디자인  
✅ 오늘의 수업 아래  
✅ 공지사항 맨 아래  
✅ 세로 스택 레이아웃  

---

## 반응형 동작 정리

### Breakpoint: 1024px (lg)

| 화면 크기 | QR 위치 | 레이아웃 | Grid |
|----------|---------|---------|------|
| **< 1024px** (모바일) | 최상단 | 세로 스택 | 1열 |
| **≥ 1024px** (데스크톱) | 우측 사이드바 | 3단 그리드 | 2:1 |

### CSS 클래스 활용
```typescript
{/* 모바일: 표시 / 데스크톱: 숨김 */}
<div className="lg:hidden">
  <SimpleQRWidget />
</div>

{/* 모바일: 숨김 / 데스크톱: 표시 */}
<div className="hidden lg:block">
  <SimpleQRWidget />
</div>
```

---

## Before / After 비교

### QR 디자인

**Before (학생증 카드):**
```
┌─────────────────────┐
│ 신구대학교 디지털 학생증│
│                     │
│     ███████         │
│     ███████  QR     │
│     ███████         │
│                     │
│  김민수              │
│  #123               │
│  IT소프트웨어과      │
│  3학년              │
│                     │
│  유효기간: ...       │
└─────────────────────┘
```

**After (심플 위젯):**
```
┌─────────────────┐
│  김민수  #123   │ ← 작게
│                 │
│   ███████       │
│   ███████  QR   │
│   ███████       │
│                 │
│ 도서관 출입 QR  │
│ 출입 시 스캔    │
│                 │
│ ⟳ 갱신까지 00:54│ ← 강조
└─────────────────┘
```

### 레이아웃

**Before (통일):**
- 모바일: QR 상단 중앙
- 데스크톱: QR 상단 중앙

**After (이원화):**
- 모바일: QR 최상단 (전체 너비)
- 데스크톱: QR 우측 사이드바 (Sticky)

---

## 사용자 경험 개선

### 1. 웹 (데스크톱)
**장점:**
- QR 항상 접근 가능 (Sticky)
- 메인 콘텐츠 최대화 (2칸)
- 효율적인 공간 활용

**시나리오:**
- 수업 확인하면서 QR 스캔 준비
- 공지사항 읽으면서 도서관 이동
- 스크롤 상관없이 QR 접근

### 2. 앱 (모바일)
**장점:**
- QR 가장 먼저 보임
- 빠른 스캔 가능
- 심플한 인터페이스

**시나리오:**
- 앱 열자마자 QR 스캔
- 도서관 입구에서 즉시 사용
- 한 손으로 간편 조작

### 3. 심플 디자인
**Before (학생증):**
- 정보 과다
- 시선 분산
- 복잡한 구조

**After (위젯):**
- 핵심만 표시
- QR에 집중
- 깔끔한 디자인

---

## 성능 개선

### 컴포넌트 경량화
```typescript
// Before: DigitalIDCard
- 310 lines
- 복잡한 레이아웃
- 여러 섹션

// After: SimpleQRWidget
- ~60 lines
- 단순 구조
- 핵심 기능만
```

### 렌더링 최적화
- 조건부 렌더링 활용
- 불필요한 DOM 요소 제거
- 번들 크기 감소

---

## 기술 구현

### Responsive Display
```typescript
// Tailwind CSS Utility Classes

// 모바일에서만 표시
lg:hidden

// 데스크톱에서만 표시
hidden lg:block

// Sticky 포지셔닝
sticky top-24
```

### Grid Layout
```typescript
// 3단 그리드 (데스크톱)
grid grid-cols-3 gap-8

// 좌측 2칸
lg:col-span-2

// 우측 1칸 (기본값)
```

### Timer Logic
```typescript
const [qrTimer, setQrTimer] = useState(60);

useEffect(() => {
  const qrInterval = setInterval(() => {
    setQrTimer(prev => prev > 0 ? prev - 1 : 60);
  }, 1000);
  
  return () => clearInterval(qrInterval);
}, []);

// 표시
{String(Math.floor(qrTimer / 60)).padStart(2, '0')}:
{String(qrTimer % 60).padStart(2, '0')}
```

---

## 접근성

### 키보드 네비게이션
✅ QR 위젯 Tab 이동  
✅ 전체보기 버튼 Focus  
✅ 공지사항 탭 선택  

### 색상 대비
✅ 연두색 보더 명확  
✅ 타이머 배경 충분한 대비  
✅ 텍스트 가독성  

### 스크린 리더
✅ QR 코드 alt text  
✅ 타이머 aria-label  
✅ Semantic HTML  

---

## 요약

**핵심 달성사항:**
1. ✅ 이원화 전략: 웹(위젯) / 앱(상단)
2. ✅ QR 디자인 롤백: 학생증 → 심플 위젯
3. ✅ 반응형 레이아웃: `lg:hidden` / `hidden lg:block`
4. ✅ Sticky QR: 데스크톱에서 항상 접근
5. ✅ 여백 증가: space-y-6 → space-y-8
6. ✅ 전체보기 버튼 강조: 연두색 배경

**디자인 원칙:**
- **Simple is Best**: 복잡함 제거
- **사용성 우선**: 기기별 최적화
- **일관성**: rounded-3xl, shadow-sm
- **접근성**: 충분한 여백, 명확한 대비

**결과:**
✅ 웹 효율성 향상 (Sticky QR)  
✅ 앱 사용성 향상 (QR 최상단)  
✅ 디자인 간소화 (310 → 60 lines)  
✅ 가독성 향상 (여백 33% 증가)  

---

**작성**: 2026-01-09  
**신규 파일**: 
- `src/components/SimpleQRWidget.tsx`

**수정 파일**: 
- `src/pages/Home.tsx`

**대체 파일**: 
- `src/components/DigitalIDCard.tsx` (더 이상 사용 안 함)

**다음 작업**: 공지사항 상세 페이지 구현 - 07
