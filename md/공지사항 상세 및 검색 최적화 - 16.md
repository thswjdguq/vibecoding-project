# 공지사항 상세 및 검색 최적화 - 16

## 작업 개요

공지사항 시스템을 전면 개편하여 실시간 검색 기능, 카테고리 분류, 상세 페이지, 첨부파일 미리보기 모달, 모바일 네비게이션까지 구현했습니다. 사용자가 원하는 정보를 빠르게 찾고 편리하게 열람할 수 있도록 개선했습니다.

---

## 주요 구현 사항

### 1. NoticeList.tsx - 공지사항 목록

#### 실시간 검색 기능
```tsx
const [searchQuery, setSearchQuery] = useState('');

// useMemo로 실시간 필터링
const filteredNotices = useMemo(() => {
  return allNotices.filter(notice => {
    const matchesSearch = notice.title.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesCategory = selectedCategory === '전체' || notice.category === selectedCategory;
    return matchesSearch && matchesCategory;
  });
}, [searchQuery, selectedCategory]);
```

**특징:**
- **페이지 새로고침 없음**: 타이핑하는 동안 즉시 필터링
- **useMemo**: 최적화된 필터링 (불필요한 재계산 방지)
- **대소문자 구분 없음**: `toLowerCase()`

#### 카테고리 탭
```tsx
const categories: Category[] = ['전체', '학사', '장학', '취업', '일반'];

<div className="flex gap-2 overflow-x-auto pb-2">
  {categories.map((category) => (
    <button
      onClick={() => setSelectedCategory(category)}
      className={`px-6 py-3 rounded-2xl font-semibold whitespace-nowrap transition ${
        selectedCategory === category
          ? 'bg-primary-500 text-white shadow-lg shadow-primary-500/30'
          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
      }`}
    >
      {category}
    </button>
  ))}
</div>
```

**카테고리 색상:**
```typescript
const getCategoryColor = (category: Category) => {
  const colors = {
    '학사': 'bg-blue-100 text-blue-700',
    '장학': 'bg-primary-100 text-primary-700',
    '취업': 'bg-purple-100 text-purple-700',
    '일반': 'bg-gray-100 text-gray-700'
  };
  return colors[category];
};
```

#### 고정 공지 (Pinned)
```tsx
const pinnedNotices = filteredNotices.filter(n => n.isPinned);
const regularNotices = filteredNotices.filter(n => !n.isPinned);

{/* 고정 공지 */}
{pinnedNotices.length > 0 && (
  <div className="border-b-4 border-primary-500">
    {pinnedNotices.map((notice) => (
      <div className="p-6 hover:bg-primary-50 transition">
        <span className="px-3 py-1 bg-error text-white text-xs rounded-full">
          중요
        </span>
        {/* ... */}
      </div>
    ))}
  </div>
)}
```

**고정 공지 특징:**
- 빨간 "중요" 배지
- 하단에 4px 연두색 구분선
- 항상 상단에 표시

---

### 2. NoticeDetail.tsx - 공지사항 상세

#### 상단 헤더
```tsx
<div className="p-8 border-b">
  {/* 카테고리 배지 */}
  <span className={`px-3 py-1 text-sm font-semibold rounded-full ${getCategoryColor(notice.category)}`}>
    {notice.category}
  </span>

  {/* 제목 */}
  <h1 className="text-3xl font-bold text-gray-900 mb-4">
    {notice.title}
  </h1>

  {/* 메타 정보 */}
  <div className="flex items-center gap-6 text-sm text-gray-600">
    <div className="flex items-center gap-2">
      <Calendar className="w-4 h-4" />
      <span>{notice.date}</span>
    </div>
    <div className="flex items-center gap-2">
      <Eye className="w-4 h-4" />
      <span>조회 {notice.views}</span>
    </div>
    <div>
      <span>작성자: {notice.author}</span>
    </div>
  </div>
</div>
```

#### 본문 영역 (가독성 최적화)
```tsx
<div className="p-8 md:p-12">
  <div className="prose dark:prose-invert max-w-none">
    <div className="text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-lg">
      {notice.content}
    </div>
  </div>

  {/* 반응형 이미지 */}
  <div className="mt-8">
    <img 
      src="/api/placeholder/800/400" 
      alt="공지사항 이미지" 
      className="w-full h-auto rounded-2xl"
    />
  </div>
</div>
```

**가독성 개선:**
- 폰트 크기: `text-lg` (18px)
- 줄 간격: `leading-relaxed` (1.625)
- 여백: `p-8 md:p-12`
- 단락 보존: `whitespace-pre-wrap`
- 이미지: `w-full h-auto` (반응형)

#### 첨부파일 영역
```tsx
<div className="bg-gray-50 rounded-2xl p-6">
  <h3 className="font-semibold mb-4 flex items-center gap-2">
    <FileText className="w-5 h-5" />
    첨부파일 ({notice.attachments.length})
  </h3>
  <div className="space-y-3">
    {notice.attachments.map((file, index) => (
      <div className="flex items-center justify-between p-4 bg-white rounded-xl">
        {/* 파일 정보 */}
        <div className="flex items-center gap-3">
          <div className="text-2xl">📄</div>
          <div>
            <p className="font-semibold">{file.name}</p>
            <p className="text-sm text-gray-500">
              {file.type} · {file.size}
            </p>
          </div>
        </div>

        {/* 버튼 */}
        <div className="flex gap-2">
          <button onClick={() => handlePreview(file.name)}>
            <Eye /> 미리보기
          </button>
          <button>
            <Download /> 다운로드
          </button>
        </div>
      </div>
    ))}
  </div>
</div>
```

**버튼 디자인:**
1. **미리보기 버튼**:
   - 배경: `bg-gray-200` (회색)
   - Hover: `hover:bg-gray-300`
   - 모바일: 아이콘만 (`hidden sm:inline`)

2. **다운로드 버튼**:
   - 배경: `bg-primary-500` (연두)
   - Hover: `hover-lift`
   - 모바일: 아이콘만

#### 미리보기 모달
```tsx
<AnimatePresence>
  {previewModalOpen && (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      className="fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4"
      onClick={() => setPreviewModalOpen(false)}
    >
      <motion.div
        initial={{ scale: 0.9, opacity: 0 }}
        animate={{ scale: 1, opacity: 1 }}
        exit={{ scale: 0.9, opacity: 0 }}
        onClick={(e) => e.stopPropagation()}
        className="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden"
      >
        {/* 헤더 */}
        <div className="p-6 border-b">
          <h3 className="text-xl font-bold">파일 미리보기</h3>
          <p className="text-sm text-gray-500">{previewFile}</p>
          <button onClick={() => setPreviewModalOpen(false)}>
            <X />
          </button>
        </div>

        {/* 미리보기 영역 */}
        <div className="p-6 overflow-y-auto h-[calc(90vh-180px)]">
          {/* PDF.js 또는 iframe 사용 예정 */}
        </div>

        {/* 푸터 */}
        <div className="p-6 border-t flex justify-end gap-3">
          <button onClick={() => setPreviewModalOpen(false)}>닫기</button>
          <button><Download /> 다운로드</button>
        </div>
      </motion.div>
    </motion.div>
  )}
</AnimatePresence>
```

**모달 특징:**
- **Framer Motion**: 부드러운 등장/퇴장
- **배경 클릭**: 모달 닫기
- **Stop Propagation**: 모달 내부 클릭 시 닫히지 않음
- **최대 높이**: `max-h-[90vh]` (화면의 90%)
- **스크롤**: `overflow-y-auto`

#### 모바일 네비게이션 (하단 고정)
```tsx
{/* 모바일 이전글/다음글 네비게이션 (하단 고정) */}
<div className="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-40">
  <div className="flex items-center h-16">
    <button
      onClick={() => navigate(`/notices/${Number(id) - 1}`)}
      className="flex-1 h-full flex items-center justify-center gap-2 border-r"
    >
      <ChevronLeft className="w-5 h-5" />
      <span className="font-semibold">이전글</span>
    </button>
    <button
      onClick={() => navigate(`/notices/${Number(id) + 1}`)}
      className="flex-1 h-full flex items-center justify-center gap-2"
    >
      <span className="font-semibold">다음글</span>
      <ChevronRight className="w-5 h-5" />
    </button>
  </div>
</div>
```

**데스크톱 네비게이션**
```tsx
<div className="hidden md:flex gap-4 mt-6">
  <button className="flex-1 p-4 bg-white rounded-2xl hover:bg-gray-50 flex items-center gap-3">
    <ChevronLeft />
    <div className="text-left">
      <p className="text-sm text-gray-500">이전글</p>
      <p className="font-semibold">중간고사 일정 안내</p>
    </div>
  </button>
  <button className="flex-1 p-4 bg-white rounded-2xl hover:bg-gray-50 flex items-center gap-3 justify-end">
    <div className="text-right">
      <p className="text-sm text-gray-500">다음글</p>
      <p className="font-semibold">2026년 국가장학금 신청 안내</p>
    </div>
    <ChevronRight />
  </button>
</div>
```

---

## 사용자 플로우

### 공지사항 검색
```
1. 공지사항 페이지 접속
   ↓
2. 검색창에 키워드 입력
   ↓
3. 실시간 필터링 (즉시 반영)
   ↓
4. 카테고리 탭 클릭 (학사/장학/취업/일반)
   ↓
5. 검색 결과 확인
   ↓
6. 공지 클릭 → 상세 페이지
```

### 공지사항 상세
```
1. 상세 페이지 접속
   ↓
2. 제목, 날짜, 조회수 확인
   ↓
3. 본문 읽기 (큰 폰트, 넓은 줄 간격)
   ↓
4. 첨부파일 확인
   ↓
5-a. [미리보기] 클릭 → 모달 열림
   ↓
5-b. [다운로드] 클릭 → 파일 다운로드
   ↓
6. 모바일: 하단 이전글/다음글 탭
   데스크톱: 하단 카드 클릭
```

---

## 반응형 동작

### NoticeList
**모바일:**
- 검색창: 전체 너비
- 카테고리 탭: 가로 스크롤
- 하단 여백: `pb-24` (하단 네비게이션 공간)

**데스크톱:**
- 하단 여백: `md:pb-8`

### NoticeDetail
**모바일:**
- 본문 여백: `p-8`
- 버튼 텍스트: 숨김 (`hidden sm:inline`)
- 이전/다음팀: 하단 고정 (`fixed bottom-0`)

**데스크톱:**
- 본문 여백: `md:p-12`
- 버튼 텍스트: 표시
- 이전/다음글: 카드 형태 (`hidden md:flex`)

### 추가 기능

#### 1. 중요 공지 시각적 강조 (NoticeList)
```tsx
{/* 왼쪽 포인트 바 (중요 공지 강조) */}
<div className="absolute left-0 top-0 bottom-0 w-1 bg-primary-500" />
```

**특징:**
- 위치: `absolute left-0`
- 너비: `w-1` (4px)
- 색상: `bg-primary-500` (#a2c54e)
- 적용: 고정 공지만

#### 2. AI 요약 버튼 (NoticeDetail)
```tsx
<button
  onClick={() => alert('AI 요약 기능은 준비 중입니다.')}
  className="w-full md:w-auto px-6 py-4 bg-primary-500 text-white 
    rounded-2xl hover-lift transition flex items-center justify-center gap-2 
    font-semibold shadow-lg shadow-primary-500/30"
>
  <Sparkles className="w-5 h-5" />
  <span>AI로 이 공지 요약하기</span>
</button>
```

**특징:**
- 아이콘: Sparkles (반짝이)
- 배경: `bg-primary-500` (연두)
- 그림자: `shadow-lg shadow-primary-500/30`
- 위치: 본문 하단
- 모바일: 전체 너비 (`w-full md:w-auto`)
- 준비 중: alert 메시지

---

## 요약

### 구현 완료
1. ✅ NoticeList.tsx - 공지사항 목록
2. ✅ 실시간 검색 (useMemo)
3. ✅ 카테고리 탭 (5개)
4. ✅ 고정 공지 분리
5. ✅ **중요 공지 왼쪽 포인트 바** (#a2c54e)
6. ✅ NoticeDetail.tsx - 상세 페이지
7. ✅ 가독성 최적화 (큰 폰트, 넓은 줄 간격)
8. ✅ 첨부파일 (다운로드 + 미리보기)
9. ✅ 미리보기 모달 (Framer Motion)
10. ✅ 모바일 이전/다음글 네비게이션
11. ✅ **AI 요약 버튼** (Sparkles 아이콘)

### 디자인 원칙
- **실시간 반응**: 페이지 새로고침 없음
- **카테고리 색상**: 일관된 색상 체계
- **#a2c54e 테마**: 선택된 탭, 고정 공지 구분선, AI 버튼, 포인트 바

### 파일 생성
**신규:**
- `src/pages/NoticeList.tsx`
- `src/pages/NoticeDetail.tsx`

**수정:**
- `src/App.tsx` (라우트 추가)

---

**작성**: 2026-01-13  
**업데이트**: AI 요약 버튼 및 포인트 바 추가  
**다음 작업**: 대시보드 통합 및 최종 검증 - 17
